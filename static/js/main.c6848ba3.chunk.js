(this["webpackJsonpspell-and-speak"]=this["webpackJsonpspell-and-speak"]||[]).push([[0],{122:function(e,t){},21:function(e,t){},4:function(e){e.exports=JSON.parse('[{"name":"CAT","image":"cat.webp"},{"name":"RAT","image":"rat.webp"},{"name":"PIG","image":"pig.webp"},{"name":"COW","image":"cow.webp"},{"name":"DOG","image":"dog.webp"},{"name":"FROG","image":"frog.webp"},{"name":"LION","image":"lion.webp"},{"name":"CRAB","image":"crab.webp"},{"name":"DEER","image":"deer.webp"},{"name":"WOLF","image":"wolf.webp"},{"name":"BEAR","image":"bear.webp"},{"name":"FISH","image":"fish.webp"},{"name":"BIRD","image":"bird.webp"},{"name":"SNAIL","image":"snail.webp"},{"name":"TIGER","image":"tiger.webp"},{"name":"WHALE","image":"whale.webp"},{"name":"MOUSE","image":"mouse.webp"},{"name":"ZEBRA","image":"zebra.webp"},{"name":"SHEEP","image":"sheep.webp"},{"name":"HORSE","image":"horse.webp"},{"name":"RABBIT","image":"rabbit.webp"},{"name":"TURTLE","image":"turtle.webp"},{"name":"BEETLE","image":"beetle.webp"},{"name":"SPIDER","image":"spider.webp"},{"name":"OCTOPUS","image":"octopus.webp"},{"name":"CHICKEN","image":"chicken.webp"},{"name":"ELEPHANT","image":"elephant.webp"},{"name":"SQUIRREL","image":"squirrel.webp"},{"name":"ALLIGATOR","image":"alligator.webp"}]')},500:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),o=a(49),c=a.n(o),s=(a(58),a(59),a(4));var i=r.a.forwardRef((e,t)=>r.a.createElement("div",{ref:t,id:e.id,"data-testid":e.id,className:"character-chip",draggable:"true",onDragStart:e.onDragStart,onTouchEnd:e.onTouchEnd},e.char)),l=(a(60),a(12)),d=a.n(l),p=(a(25),a(50));const u="MOVE_CHIP",h="DROP_CHIP",m="SET_CHARACTER_CHIPS",g="SET_INPUT_BOX_CHIPS",f="SET_HAS_DROPPED",b="INIT_NEW_WORD",y="SET_FADE_OUT",E="PROGRESS_TO_NEXT_ANIMAL",I="INCREMENT_ANIMAL_INDEX",C="DECREMENT_ANIMAL_INDEX",x="CONGRATULATE";d.a.config.region="us-east-1",d.a.config.credentials=new l.CognitoIdentityCredentials({IdentityPoolId:"us-east-1:5ee4b58d-942a-4568-a4d5-4dcc551259c3"});const w=(e,t)=>{switch(t.type){case y:return{...e,fadeOut:t.payload};case u:{const{sourceChipId:a,sourceLocation:n,targetInputBoxId:r}=t.payload;if(!r)return e;if(r===n)return e;const o="character-tray"===n?e.characterChips.filter(e=>e.id!==a):e.characterChips.slice(),c={...e.inputBoxChips};n.includes("input-box")&&(c[n]=null);const s=e.inputBoxChips[r];return s&&o.push({id:s,char:s.substring(15,16)}),c[r]=a,{...e,characterChips:o,inputBoxChips:c}}case I:{const t=(e.animalIndex+1)%s.length;localStorage.setItem("animalIndex",t);const a=s[t].name;return localStorage.setItem("currentWord",a),{...e,currentWord:a,resetWord:!0,animalIndex:t}}case C:{const t=(e.animalIndex-1+s.length)%s.length;localStorage.setItem("animalIndex",t);const a=s[t].name;return localStorage.setItem("currentWord",a),{...e,currentWord:a,resetWord:!0,animalIndex:t}}case E:{let t=(e.animalIndex+1)%s.length;localStorage.setItem("animalIndex",t);let a=s[t].name;localStorage.setItem("currentWord",a);let n={};for(let e=0;e<a.length;e++)n["input-box-".concat(e)]=null;return{...e,animalIndex:t,currentWord:a,resetWord:!0,inputBoxChips:n}}case h:{const{draggedChipId:a,targetInputBoxId:n}=t.payload;console.log("dropped",a,n);const r=e.inputBoxChips[n],o=e.characterChips.filter(e=>e.id!==a);if(r){const t=e.characterChips.find(e=>e.id===r);t&&o.push(t)}const c={...e.inputBoxChips,[n]:a};return{...e,characterChips:o,inputBoxChips:c,hasDropped:!0}}case m:return{...e,characterChips:t.payload};case g:return{...e,inputBoxChips:t.payload};case f:return{...e,hasDropped:t.payload};case x:{const t=document.querySelectorAll(".input-box");return t.forEach(e=>{e.style.border="2px solid green"}),setTimeout(()=>{t.forEach(e=>{e.style.transition="opacity 1s ease-in-out",e.style.opacity=0})},1e3),{...e}}case b:{const{newWord:a,newInputBoxChips:n,shuffledCharacters:r}=t.payload;return document.querySelectorAll(".input-box").forEach(e=>{e.style.border="1px dashed grey",e.style.opacity=1,e.style.transition=null}),{...e,currentWord:a,inputBoxChips:n,characterChips:r,fadeOut:!1}}default:return e}},O={A:"ahhhh or ayyyyy",B:"behhhh",C:"kehhhh or sehhhh",D:"dehhhhh",E:"ehhhhh or eeeeee",F:"fffehhhhh"};var S=function(){let e=JSON.parse(localStorage.getItem("inputBoxChips"))||{};const t={characterChips:[],inputBoxChips:e,hasDropped:!1,fadeOut:!1,resetWord:!1,animalIndex:parseInt(localStorage.getItem("animalIndex"),10)||0};console.log("Input box chips: ",e);const[a,o]=Object(n.useReducer)(w,t),{currentWord:c,characterChips:l,inputBoxChips:d,hasDropped:h}=a,[m,S]=Object(n.useState)({}),v={current:Object(n.useRef)(a.currentWord)};Object(n.useEffect)(()=>{v.current=a.currentWord});const T=Object(n.useCallback)(e=>{const t=new SpeechSynthesisUtterance(e);t.rate=.6,t.voice=(()=>{let e=window.speechSynthesis.getVoices().filter(e=>e.name.match("Natural.*English.*United States"));return e.find(e=>e.name.match("Emma"))||null||(e.length?e[0]:window.speechSynthesis.getVoices()[0])||null})(),window.speechSynthesis.speak(t)},[a.inputBoxChips]),B=Object(n.useCallback)(e=>{var t;(e=>{"speechSynthesis"in window?T(e):console.error("Speech synthesis not supported in this browser.")})(e=(e=null!==(t=e)&&void 0!==t?t:Object.keys(a.inputBoxChips).sort().map(e=>{var t;return(null!==(t=a.inputBoxChips[e])&&void 0!==t?t:" ").replace("character-chip-","")[0]}).join("").replace(/\s{2,}/g," ")).length>1?e:function(e){const t=O[e.toUpperCase()];return t||(console.error("Sound not found for letter:",e),e)}(e))},[T]),N=Object(n.useCallback)(()=>{var e;document.getElementById("word-display")&&((null===(e=document.getElementById("word-display").classList)||void 0===e?void 0:e.contains("fade-out"))&&(document.getElementById("word-display").classList.remove("fade-out"),setTimeout(()=>{document.getElementById("word-display").classList.add("fade-out")},1e3)));c&&B(c)},[c]);Object(n.useEffect)(()=>{N()},[a.currentWord]),Object(n.useEffect)(()=>{o({type:y,payload:!0}),void 0!==v.current&&v.current!==a.currentWord&&o({type:g,payload:{}})},[a.currentWord]),Object(n.useEffect)(()=>{o({type:y,payload:!0})},[a.fadeOut]);const D=Object(n.useCallback)(()=>{B()},[B]);Object(n.useEffect)(()=>{D()},[d]),Object(n.useEffect)(e=>{localStorage.setItem("inputBoxChips",JSON.stringify(d))},[d]),Object(n.useEffect)(()=>{const e=localStorage.getItem("inputBoxChips")||"{}";if(e){const t=JSON.parse(e);o({type:g,payload:t})}},[]);const j=e=>{const{id:t}=e.currentTarget;e.dataTransfer.setData("text/plain",t),e.dataTransfer.setData("parentId",e.nativeEvent.target.parentNode.id);const a=e.currentTarget.cloneNode(!0);a.style.position="absolute",a.style.top="-99999px",document.body.appendChild(a),e.dataTransfer.setDragImage(a,a.offsetWidth/2,a.offsetHeight/2),setTimeout(()=>{document.body.contains(a)&&document.body.removeChild(a)},0)},R=e=>{e.preventDefault()},A=Object(n.useCallback)(e=>{e.target.classList.add("dragging"),e.parentId=e.target.parentNode.id;const t=e.targetTouches[0];e.target.style.position="absolute",e.target.style.left="".concat(t.pageX-e.target.offsetWidth/2,"px"),e.target.style.top="".concat(t.pageY-e.target.offsetHeight/2,"px")},[]),W=(e,t)=>{e.preventDefault();const a=e.dataTransfer?e.dataTransfer.getData("text/plain"):e.target.id;if(a.includes("input-box-"))return;let n=e.dataTransfer?e.dataTransfer.getData("parentId"):e.parentId;o({type:u,payload:{sourceChipId:a,sourceLocation:n,targetInputBoxId:t}})},L=Object(n.useCallback)(e=>{e.preventDefault();const t=e.changedTouches[0],a=t.clientX,n=t.clientY,r=e.target.id,o=Object.keys(d).find(e=>{const t=document.getElementById(e).getBoundingClientRect();return a>=t.left&&a<=t.right&&n>=t.top&&n<=t.bottom});e.target.classList.remove("dragging"),e.target.removeAttribute("style"),e.target.style.position="",e.target.style.left="",e.target.style.top="";const c=e.target.parentNode?e.target.parentNode.id:document.getElementById(e.target.id).parentNode.id;W({preventDefault:()=>{},dataTransfer:!1,parentId:c,target:{id:r}},o)},[]);Object(n.useEffect)(()=>{Object.values(a.inputBoxChips).map(e=>(null!==e&&void 0!==e?e:" ").substring(15,16)).join("")===a.currentWord&&(Object(p.a)({particleCount:150,spread:70,startVelocity:30,gravity:.5,ticks:200,origin:{x:.5,y:.5}}),o({type:x}),setTimeout(()=>{o({type:E})},1500))},[a.inputBoxChips,o]),Object(n.useEffect)(()=>{const e=s[a.animalIndex].name;let t=JSON.parse(localStorage.getItem("inputBoxChips"))||{};if(a.resetWord){t={};for(let a=0;a<e.length;a++)t["input-box-".concat(a)]=null}const n=e.split("").map((e,t)=>({id:"character-chip-".concat(e,"-").concat(t),char:e})),r=Math.ceil(.5*e.length),c=[...n,...Array.from({length:r},(t,a)=>{const n=String.fromCharCode(65+Math.floor(26*Math.random()));return{id:"character-chip-".concat(n,"-").concat(e.length+a),char:n}})].sort(()=>.5-Math.random());o({type:b,payload:{newWord:e,newInputBoxChips:t,shuffledCharacters:c}})},[a.animalIndex,o]),Object(n.useEffect)(()=>{h&&o({type:f,payload:!1})},[h,o]),Object(n.useEffect)(()=>()=>{document.querySelectorAll(".drag-image").forEach(e=>e.remove())},[]),Object(n.useEffect)(()=>{const e=l.reduce((e,t)=>(e[t.id]=r.a.createRef(),e),{});S(e)},[l]),Object(n.useEffect)(()=>{const e=e=>{e.preventDefault(),e.target.classList.add("dragging"),e.parentId=e.target.parentNode.id;const t=e.targetTouches[0];e.target.style.position="absolute",e.target.style.left="".concat(t.pageX-e.target.offsetWidth/2,"px"),e.target.style.top="".concat(t.pageY-e.target.offsetHeight/2,"px")};return Object.values(m).forEach(t=>{const a=t.current;a&&a.addEventListener("touchmove",e,{passive:!1})}),()=>{Object.values(m).forEach(t=>{const a=t.current;a&&a.removeEventListener("touchmove",e)})}},[m,A]);const k=a.fadeOut?"fade-out":"";return r.a.createElement("div",{className:"app"},r.a.createElement("div",null,r.a.createElement("header",{className:"header"},"spellsay.com"),c&&r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{onClick:()=>N(c),className:"word-image",src:"/assets/images/".concat(c,".webp"),alt:c}),r.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"}},r.a.createElement("div",{className:"nav-buttons",onClick:()=>o({type:C})},"\u2190"),r.a.createElement("label",{id:"word-display",onClick:()=>N(c),className:"word-display ".concat(k)},c),r.a.createElement("div",{className:"nav-buttons",onClick:()=>o({type:I})},"\u2192")))),r.a.createElement("div",{id:"input-boxes",className:"input-boxes"},Object.keys(d).map(e=>{const t=d[e],a=t?{id:t,char:t.substring(15,16)}:null;return r.a.createElement("div",{key:e,id:e,className:"input-box",onDrop:t=>W(t,e),onDragOver:R},a?r.a.createElement(i,{ref:m[a.id],key:a.id,id:a.id,char:a.char,onDragStart:j,onTouchEnd:L}):null)})),r.a.createElement("div",{id:"character-tray",className:"character-tray"},l.map(e=>r.a.createElement(i,{ref:m[e.id],key:e.id,id:e.id,char:e.char,onDragStart:j,onTouchEnd:L}))))};var v=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,501)).then(t=>{let{getCLS:a,getFID:n,getFCP:r,getLCP:o,getTTFB:c}=t;a(e),n(e),r(e),o(e),c(e)})};c.a.createRoot(document.getElementById("root")).render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(S,null))),v()},51:function(e,t,a){e.exports=a(500)},58:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){}},[[51,1,2]]]);
//# sourceMappingURL=main.c6848ba3.chunk.js.map